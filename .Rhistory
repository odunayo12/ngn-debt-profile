View(jun_30_16)
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding` ) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(!is.na(outstanding_usd_inM), str_detect(outstanding_usd_inM, "^in[ ]", negate = T), str_detect(debt_cat, "Total", negate = T)) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding` ) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(!is.na(outstanding_usd_inM), str_detect(outstanding_usd_inM, "^in[ ]", negate = T), str_detect(debt_cat, "Total", negate = T)) %>%
mutate(debt_cat = str_replace_all(debt_cat, ".|B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding` ) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(!is.na(outstanding_usd_inM), str_detect(outstanding_usd_inM, "^in[ ]", negate = T), str_detect(debt_cat, "Total", negate = T)) %>%
#mutate(debt_cat = str_replace_all(debt_cat, ".|B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
#select(`Debt Category`, X2, `Amount Outstanding` ) %>%
# #rename(
#   debt_cat = `Debt Category`,
#   outstanding_usd_inM = X2,
#   outstanding_ngn_inM = `Amount Outstanding`
# ) %>%
#filter(!is.na(outstanding_usd_inM), str_detect(outstanding_usd_inM, "^in[ ]", negate = T), str_detect(debt_cat, "Total", negate = T)) %>%
#mutate(debt_cat = str_replace_all(debt_cat, ".|B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding` ) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(!is.na(outstanding_usd_inM), str_detect(outstanding_usd_inM, "^in[ ]", negate = T), str_detect(debt_cat, "Total", negate = T)) %>%
trans_mutate(debt_cat = str_replace_all(debt_cat, ".|B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
trans_mutate(debt_cat = str_replace_all(debt_cat, ".", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace_all(debt_cat, ".", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = gsub(debt_cat, ".", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, ".", "")) %>%
view()
glimpse(mar_31_18)
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, ". ", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, ".|B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace_all(debt_cat, ".", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, "B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, regexpr("^.|^B[.]"), "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, regexpr("^."), "")) %>%
view()
regex_pattern <- regex("^.")
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, regex_pattern, "")) %>%
view()
regex_pattern <- regex("^.|^B")
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, regex_pattern, "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace(debt_cat, ".B.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace_all(debt_cat, "B\\.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat = str_replace_all(debt_cat, "B\\.|\\.", "")) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_tr(str_replace_all(debt_cat, "B\\.|\\.", ""))) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_trim(str_replace_all(debt_cat, "B\\.|\\.", ""))) %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_trim(str_replace_all(debt_cat, "B\\.|\\.", "")),
ext_rate = 306,
ext_rate = replace(ext_rate, str_detect(debt_cat, "*$"), 305.65),
remark = " Note: CBN Official Exchange Rate of US$1 to NGN306 as at December 31, 2017 and US$1 to NGN305.65
as at March 31, 2018 were used for the conversion of External debt stock to Naira") %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_trim(str_replace_all(debt_cat, "B\\.|\\.", "")),
ext_rate = 306,
ext_rate = replace(ext_rate, str_detect(debt_cat, "\\*$"), 305.65),
remark = " Note: CBN Official Exchange Rate of US$1 to NGN306 as at December 31, 2017 and US$1 to NGN305.65
as at March 31, 2018 were used for the conversion of External debt stock to Naira") %>%
view()
mar_31_18 <- X2470 %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_trim(str_replace_all(debt_cat, "[A-Z]\\.|\\.", "")),
ext_rate = 306,
ext_rate = replace(ext_rate, str_detect(debt_cat, "\\*$"), 305.65),
remark = " Note: CBN Official Exchange Rate of US$1 to NGN306 as at December 31, 2017 and US$1 to NGN305.65
as at March 31, 2018 were used for the conversion of External debt stock to Naira") %>%
view()
View(jun_30_17)
View(mar_31_16)
trim_value_2_plus <- function(raw_data, as_at, ext_rate_f, ext_rate_2_f, remark_f ) {
raw_data %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_trim(str_replace_all(debt_cat, "[A-Z]\\.|\\.", "")),
as_at = as_at,
ext_rate = ext_rate_f,
ext_rate = replace(ext_rate, str_detect(debt_cat, "\\*$"), ext_rate_2_f),
remark = remark_f)
}
trim_value_2_plus(X2470, "March 2017", 306, 306.65, "brew")
trim_value_2_plus(X2470, "March 2017", 306.2, 306.65, "brew")
trim_value_2_plus(X2470, "March 2017", 306.2, 306.65, "brew") %>% view()
library(readr)
X2529 <- read_csv("scrapper/downloads/2529.csv")
View(X2529)
trim_value_2_plus(X2470, "March 2018", 306.2, 306.65, "brew") %>% view()
View(X2529)
X2529
library(tidyverse)
library(readr)
X2529 <- read_csv("scrapper/downloads/2529.csv",
col_types = cols(.default = "c"))
View(X2529)
problems(...)
problems()
library(readr)
X2529 <- read_csv("scrapper/downloads/2529.csv")
View(X2529)
clean_text("*Actual Domestic Debt Stock for 36 States & the FCT was as at end-December, 2015
CBN Official Exchange rate of 1 USD to 283 NGN as at June 30, 2016 and 197 NGN as at December, 2015 were used IRO FGN and States
Domestic debt, respectively.")
install.packages("rccmisc")
library(rccmisc)
clean_text("*Actual Domestic Debt Stock for 36 States & the FCT was as at end-December, 2015
CBN Official Exchange rate of 1 USD to 283 NGN as at June 30, 2016 and 197 NGN as at December, 2015 were used IRO FGN and States
Domestic debt, respectively.")
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = `Amount Outstanding in USD`,
outstanding_ngn_inM = `Amount Outstanding in NGN`
) %>% view()
view(X2529)
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r", " ", .x)) %>%
#select(-`Debt Category`) %>%
# rename(
#   debt_cat = `Debt Category`,
#   outstanding_usd_inM = `Amount Outstanding in USD`,
#   outstanding_ngn_inM = `Amount Outstanding in NGN`
# ) %>%
view()
glimpse(jun_30_18)
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
# rename(
#   debt_cat = `Debt Category`,
#   outstanding_usd_inM = `Amount Outstanding in USD`,
#   outstanding_ngn_inM = `Amount Outstanding in NGN`
# ) %>%
view()
glimpse(jun_30_18)
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `debt category`,
outstanding_usd_inm = `amount outstanding in usd`,
outstanding_ngn_inm = `amount outstanding in ngn`
) %>%
view()
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inm = `amount outstanding in usd`,
outstanding_ngn_inm = `amount outstanding in ngn`
) %>%
view()
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = `Amount Outstanding in USD`,
outstanding_ngn_inM = `Amount Outstanding in NGN`
) %>%
view()
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = `Amount Outstanding in USD`,
outstanding_ngn_inM = `Amount Outstanding in NGN`
) %>%
mutate(ext_rate = 305.70,
remark = str_replace_all(" Notes:
(i) Domestic Debt Stock for 31 States + FCT was as at March 31, 2018 while the Domestic Debt Stock of 5 States (Anambra, Gombe,
Katsina, Rivers, and Zamfara) was as at December 31, 2017.
(ii) CBN Official Exchange Rate of US$1 to N305.70 as at June 30, 2018 was used in converting the Domestic Debts to USD. ", "\\r|\\n", "",)) %>%
view()
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = `Amount Outstanding in USD`,
outstanding_ngn_inM = `Amount Outstanding in NGN`
) %>%
mutate(ext_rate = 305.70,
remark = str_replace_all(" Notes:
(i) Domestic Debt Stock for 31 States + FCT was as at March 31, 2018 while the Domestic Debt Stock of 5 States (Anambra, Gombe,
Katsina, Rivers, and Zamfara) was as at December 31, 2017.
(ii) CBN Official Exchange Rate of US$1 to N305.70 as at June 30, 2018 was used in converting the Domestic Debts to USD. ", "\\r|\\n", "")) %>%
view()
# the following was read in excel because it was not properly read by the paython library
jun_30_18 <- X2529 %>% rename_with( ~ gsub("\\r|\\n", " ", .x)) %>%
#select(-`Debt Category`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = `Amount Outstanding in USD`,
outstanding_ngn_inM = `Amount Outstanding in NGN`
) %>%
mutate(ext_rate = 305.70,
remark = str_replace_all(" Notes:
(i) Domestic Debt Stock for 31 States + FCT was as at March 31, 2018 while the Domestic Debt Stock of 5 States (Anambra, Gombe,
Katsina, Rivers, and Zamfara) was as at December 31, 2017.
(ii) CBN Official Exchange Rate of US$1 to N305.70 as at June 30, 2018 was used in converting the Domestic Debts to USD. ", "\\r|\\n", " ")) %>%
view()
trim_value_2_plus <- function(raw_data, as_at, ext_rate_f, ext_rate_2_f, remark_f ) {
raw_data %>%
select(`Debt Category`, X2, `Amount Outstanding`) %>%
rename(
debt_cat = `Debt Category`,
outstanding_usd_inM = X2,
outstanding_ngn_inM = `Amount Outstanding`
) %>%
filter(
!is.na(outstanding_usd_inM),
str_detect(outstanding_usd_inM, "^in[ ]", negate = T),
str_detect(debt_cat, "Total", negate = T)
) %>%
mutate(debt_cat =str_trim(str_replace_all(debt_cat, "[A-Z]\\.|\\.", "")),
as_at = as_at,
ext_rate = ext_rate_f,
ext_rate = replace(ext_rate, str_detect(debt_cat, "\\*$"), ext_rate_2_f),
remark = str_replace_all(remark_f, "\\r|\\n", " "))
}
mar_31_18 <- trim_value_2_plus(X2470, "March 2018", 306.2, 306.65, " Note: CBN Official Exchange Rate of US$1 to NGN306 as at December 31, 2017 and US$1 to NGN305.65
as at March 31, 2018 were used for the conversion of External debt stock to Naira.")  %>% view()
